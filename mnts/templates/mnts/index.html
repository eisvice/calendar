{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpine</title>
    <script defer src="{% static 'bundle.js' %}"></script>
    <link href="{% static 'output.css' %}" rel="stylesheet">
    <script type='importmap'>
        {
          "imports": {
            "@fullcalendar/core": "https://cdn.skypack.dev/@fullcalendar/core@6.1.11",
            "@fullcalendar/daygrid": "https://cdn.skypack.dev/@fullcalendar/daygrid@6.1.11",
            "@fullcalendar/timegrid": "https://cdn.skypack.dev/@fullcalendar/timegrid@6.1.11",
            "@fullcalendar/list": "https://cdn.skypack.dev/@fullcalendar/list@6.1.11",
            "alpinejs": "../../node_modules/alpinejs"
          }
        }
    </script>
    <script type="module">
        import { Calendar } from '@fullcalendar/core'
        import dayGridPlugin from '@fullcalendar/daygrid'
        import timeGridPlugin from '@fullcalendar/timegrid'
        import listPlugin from '@fullcalendar/list'

        document.addEventListener('DOMContentLoaded', function() {
          var calendarEl = document.getElementById('calendar');
          var calendar = new Calendar(calendarEl, {
            nowIndicator: true,
            firstDay: 1,
            views: {
                timeGridWeek: {
                    dayHeaderFormat: { weekday: 'short', day: 'numeric', month: 'numeric'}
                }
            },
            slotMinTime: '08:00:00',
            contentHeight:"auto",
            plugins: [dayGridPlugin,timeGridPlugin,listPlugin],
            initialView: 'timeGridWeek',
            headerToolbar: {
              left: 'prev,today,next',
              center: 'title',
              right: 'dayGridMonth,timeGridWeek,listWeek'
            },
            events: '{%url "dates"%}'
          });
          calendar.render();
        });
  
      </script>
</head>

<body>

    <h1 id="page-title">Page Title</h1>
    <h1 x-data="{ message: 'I ❤️ Alpine' }" x-text="message"></h1>
    <p >
        <span class="box-decoration-clone bg-gradient-to-r from-indigo-600 to-pink-500 text-white px-2">
            Hello <br />
            world!
        </span>
    </p>

    <button type="button" class="px-4 py-1 text-sm text-purple-600 font-semibold rounded-full border border-purple-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2" hx-get="{% url 'index' %}" hx-trigger="click" hx-swap="outerHTML">Click</button>
    <div id="datetime" x-data="{ timeNow: new Date() }" x-text="timeNow"></div>
    <div x-data="{ count: 0 }">
        <button class="px-4 py-1 text-sm text-purple-600 font-semibold rounded-full border border-purple-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2" x-on:click="count++">Increment</button>
        <span x-text="count"></span>
    </div>
    <div x-data="{ open: false }">
        <button @click="open = ! open" class="px-4 py-1 text-sm text-purple-600 font-semibold rounded-full border border-purple-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none">Open Settings</button>
        <div x-show="open" @click.outside="open = false" x-data="{currentTab: 'Event'}">
            <ul class="mb-5 flex list-none flex-row flex-wrap justify-center border-b-0 ps-0">
                <li>
                    <a
                    href="#event-tab"
                    class="my-2 block border-x-0 border-b-2 border-t-0 border-transparent px-7 pb-3.5 pt-4 text-xs font-medium uppercase leading-tight text-neutral-500 hover:isolate hover:border-transparent hover:bg-neutral-100 focus:isolate focus:border-b-indigo-500 dark:text-white/50 dark:hover:bg-neutral-700/60"
                    @click="currentTab=$el.innerHTML"
                    :class="currentTab == $el.innerHTML ? 'border-b-indigo-500 hover:border-b-indigo-500 hover:bg-transparent' : 'border-transparent'"
                    >Event</a
                    >
                </li>
                <li>
                    <a
                    href="#themes-tab"
                    class="my-2 block border-x-0 border-b-2 border-t-0 border-transparent px-7 pb-3.5 pt-4 text-xs font-medium uppercase leading-tight text-neutral-500 hover:isolate hover:border-transparent hover:bg-neutral-100 focus:isolate focus:border-b-indigo-500 dark:text-white/50 dark:hover:bg-neutral-700/60"
                    @click="currentTab=$el.innerHTML"
                    :class="currentTab == $el.innerHTML ? 'border-b-indigo-500 hover:border-b-indigo-500 hover:bg-transparent' : 'border-transparent'"
                    >Themes</a
                    >
                </li>
                <li>
                    <a
                    href="#theme-tab"
                    class="my-2 block border-x-0 border-b-2 border-t-0 border-transparent px-7 pb-3.5 pt-4 text-xs font-medium uppercase leading-tight text-neutral-500 hover:isolate hover:border-transparent hover:bg-neutral-100 focus:isolate focus:border-b-indigo-500 dark:text-white/50 dark:hover:bg-neutral-700/60"
                    @click="currentTab=$el.innerHTML"
                    :class="currentTab == $el.innerHTML ? 'border-b-indigo-500 hover:border-b-indigo-500 hover:bg-transparent' : 'border-transparent'"
                    >New Theme</a
                    >
                </li>
            </ul>
            <div x-data="{startDay: '', arrays: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday']}" x-show="currentTab == 'Event'" id="event-tab" class="flex justify-center">
                <form hx-post="{% url 'add_event' %}" hx-swap="none" id="new-event-form" class="w-full max-w-md">
                    {% csrf_token %}
                    <div class="md:flex md:items-center mb-6">
                        <div class="md:w-1/3">
                            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="event-select">
                                Choose Theme
                            </label>
                        </div>
                        <div class="md:w-2/3">
                            <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" id="event-select" name="event-select" type="text" placeholder="Choose Event">
                        </div>
                    </div>
                    <div class="md:flex md:items-center mb-6">
                        <div class="md:w-1/3">
                            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="event-title">
                                Event Title
                            </label>
                        </div>
                        <div class="md:w-2/3">
                            <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" id="event-title" name="event-title" type="text" placeholder="Create New Event">
                        </div>
                    </div>
                    <div class="md:flex md:items-center mb-6">
                        <div class="md:w-1/3">
                            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="add-description">
                                Description
                            </label>
                        </div>
                        <div class="md:w-2/3">
                            <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" id="add-description" name="add-description" type="text" placeholder="Add Description (optional)">
                        </div>
                    </div>
                    <div class="md:flex md:items-center mb-6">
                        <div class="md:w-1/3">
                            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="start-time">
                                Start Time
                            </label>
                        </div>
                        <div class="md:w-2/3">
                            <input @change="startDay=new Date($el.value).getDay(), console.log(startDay)" class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" id="start-time" name="start-time" type="datetime-local">
                        </div>
                    </div>
                    <div class="md:flex md:items-center mb-6">
                        <div class="md:w-1/3">
                            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="repeats">
                                Repeats
                            </label>
                        </div>
                        <div class="md:w-2/3">
                            <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" id="repeats" name="repeats" type="number" placeholder="Total" value="1">
                        </div>
                    </div>

                    <div x-data="{weekdays: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'], days: []}">
                        <div class="md:flex md:items-end md:justify-end mb-6">
                            <template x-for="weekday in weekdays">
                                <div class="flex items-end ms-4">
                                    <label x-text="weekday.slice(0,3)" :for="`checkbox-${weekday.toLowerCase()}`"  class="me-1 text-sm text-gray-500 font-bold dark:text-gray-300"></label>
                                    <input :id="`checkbox-${weekday.toLowerCase()}`" type="checkbox" :value="weekday" x-model="days" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600">
                                </div>
                            </template>
                        </div>
                        <p x-text="days"></p>
                        <template x-for="day in days.sort((a, b) => weekdays.indexOf(a) - weekdays.indexOf(b));">
                            <div class="md:flex md:items-center mb-6">
                                <div class="md:w-1/3">
                                    <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" x-text="day" :for="`time-${day.toLowerCase()}`"></label>
                                </div>
                                <div class="md:w-2/3">
                                    <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" :id="`time-${day.toLowerCase()}`" :name="`time-${day.toLowerCase()}`" type="time">
                                </div>
                            </div>
                        </template>
                    </div>

                    <div class="md:flex md:items-center">
                        <div class="md:w-1/3"></div>
                        <div class="md:w-2/3">
                            <button class="shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold w-4/12 py-2 px-2 rounded" type="submit">
                                Add Event
                            </button>
                        </div>
                    </div>
                </form>
            </div>
            <div x-show="currentTab == 'Themes'" id="themes-tab" class="flex justify-center">
                <div class="relative overflow-x-auto">
                    <table class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                            <tr>
                                <th scope="col" class="px-6 py-3">
                                    Title
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    Background Color
                                </th>
                                <th scope="col" class="px-6 py-3">
                                    Text Color
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                                    Apple MacBook Pro 17"
                                </th>
                                <td class="px-6 py-4">
                                    Silver
                                </td>
                                <td class="px-6 py-4">
                                    Laptop
                                </td>
                            </tr>
                            <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                                    Microsoft Surface Pro
                                </th>
                                <td class="px-6 py-4">
                                    White
                                </td>
                                <td class="px-6 py-4">
                                    Laptop PC
                                </td>
                            </tr>
                            <tr class="bg-white dark:bg-gray-800">
                                <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                                    Magic Mouse 2
                                </th>
                                <td class="px-6 py-4">
                                    Black
                                </td>
                                <td class="px-6 py-4">
                                    Accessories
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div x-show="currentTab == 'New Theme'" id="theme-tab" class="flex justify-center">
                <form id="new-theme-form" class="w-full max-w-md">
                    <div class="md:flex md:items-center mb-6">
                        <div class="md:w-1/3">
                            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="theme">
                                Theme
                            </label>
                        </div>
                        <div class="md:w-2/3">
                            <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500" id="theme" type="text" placeholder="Create New Theme">
                        </div>
                    </div>
                    <div class="md:flex md:items-center mb-6">
                        <div class="md:w-1/3">
                            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="background-color">
                                Background Color
                            </label>
                        </div>
                        <div class="md:w-2/3">
                            <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full px-4 text-gray-700 h-10 focus:outline-none focus:bg-white focus:border-purple-500" id="background-color" type="color" value="#e66465">
                        </div>
                    </div>
                    <div class="md:flex md:items-center mb-6">
                        <div class="md:w-1/3">
                            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="text-color">
                                Text Color
                            </label>
                        </div>
                        <div class="md:w-2/3">
                            <input class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full px-4 text-gray-700 h-10 focus:outline-none focus:bg-white focus:border-purple-500" id="text-color" type="color" value="#ffffff">
                        </div>
                    </div>
                    <div class="md:flex md:items-center">
                        <div class="md:w-1/3"></div>
                        <div class="md:w-2/3">
                            <button class="shadow bg-purple-500 hover:bg-purple-400 focus:shadow-outline focus:outline-none text-white font-bold w-4/12 py-2 px-2 rounded" type="button">
                                Add Theme
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div>
        <div class="p-4" id='calendar'></div>
    </div>

</body>

</html>